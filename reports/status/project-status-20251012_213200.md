# 🧠 Agentic Platform — Project Health Report

🗓️ **Fecha:** Sun, Oct 12 2025  09:32:00 PM
📂 **Ubicación:** /f/Software Developer/Porfolio/AEP_Report/argentic-platform/agentic-platform

---
{
  "timestamp": "2025-10-13T00:32:30.715Z",
  "api": {
    "status": "offline",
    "command": "pnpm exec tsx scripts/api-health-probe.ts",
    "exitCode": 1,
    "stdout": "",
    "stderr": "Health check error for http://localhost:3001/api/dashboard/areas: fetch failed\n",
    "error": "Command failed: pnpm exec tsx scripts/api-health-probe.ts\nHealth check error for http://localhost:3001/api/dashboard/areas: fetch failed\n"
  },
  "tests": {
    "api": {
      "status": "failed",
      "command": "pnpm exec jest --config apps/api/jest.config.ts",
      "exitCode": 1,
      "stdout": "",
      "stderr": "\u001b[31m[Nest] 10036  - \u001b[39m14/11/2023, 7:13:20 p.m. \u001b[31m  ERROR\u001b[39m \u001b[38;5;3m[AgentEvalService] \u001b[39m\u001b[31m❌ Error evaluando traza trace-1: openai.evals.runs.create is not a function\u001b[39m\n\u001b[31m[Nest] 10036  - \u001b[39m14/11/2023, 7:13:20 p.m. \u001b[31m  ERROR\u001b[39m \u001b[38;5;3m[AgentEvalService] \u001b[39m\u001b[31m❌ Error evaluando traza trace-2: openai.evals.runs.create is not a function\u001b[39m\nFAIL apps/api/test/agent-eval.e2e-spec.ts (9.122 s)\n  ● AgentEvalService › crea la evaluación y persiste grade/feedback/evaluator\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: ObjectContaining {\"evaluation_template_id\": \"tmpl_123\", \"inputs\": [ObjectContaining {\"input\": \"Pregunta original\", \"output\": \"Respuesta final\"}]}\n    Received: {\"data_source_config\": {\"include_sample_schema\": true, \"item_schema\": {\"properties\": {\"agent_name\": {\"type\": \"string\"}, \"completion\": {\"type\": \"string\"}, \"prompt\": {\"type\": \"string\"}, \"trace_id\": {\"type\": \"string\"}}, \"required\": [\"prompt\", \"completion\"], \"type\": \"object\"}, \"type\": \"custom\"}, \"name\": \"trace-trace-1-1700000000000\", \"testing_criteria\": [{\"input\": [{\"content\": \"Eres un evaluador imparcial. Analiza la respuesta del asistente y asigna una puntuación entre 0 y 1 para el criterio \\\"Claridad técnica\\\". Evalúa si la respuesta explica conceptos técnicos de forma clara y correcta.\", \"role\": \"system\", \"type\": \"message\"}, {\"content\": \"Prompt del usuario:\n    {{item.prompt}}·\n    Respuesta del asistente:\n    {{item.completion}}\", \"role\": \"user\", \"type\": \"message\"}], \"model\": \"gpt-4o-mini\", \"name\": \"Claridad técnica\", \"pass_threshold\": 0.7, \"range\": [0, 1], \"type\": \"score_model\"}, {\"input\": [{\"content\": \"Eres un evaluador imparcial. Analiza la respuesta del asistente y asigna una puntuación entre 0 y 1 para el criterio \\\"Coherencia institucional\\\". Verifica que el mensaje respete el tono y lineamientos institucionales del ENACOM.\", \"role\": \"system\", \"type\": \"message\"}, {\"content\": \"Prompt del usuario:\n    {{item.prompt}}·\n    Respuesta del asistente:\n    {{item.completion}}\", \"role\": \"user\", \"type\": \"message\"}], \"model\": \"gpt-4o-mini\", \"name\": \"Coherencia institucional\", \"pass_threshold\": 0.7, \"range\": [0, 1], \"type\": \"score_model\"}, {\"input\": [{\"content\": \"Eres un evaluador imparcial. Analiza la respuesta del asistente y asigna una puntuación entre 0 y 1 para el criterio \\\"Nivel de detalle\\\". Analiza si la respuesta ofrece el nivel de profundidad adecuado para el pedido.\", \"role\": \"system\", \"type\": \"message\"}, {\"content\": \"Prompt del usuario:\n    {{item.prompt}}·\n    Respuesta del asistente:\n    {{item.completion}}\", \"role\": \"user\", \"type\": \"message\"}], \"model\": \"gpt-4o-mini\", \"name\": \"Nivel de detalle\", \"pass_threshold\": 0.7, \"range\": [0, 1], \"type\": \"score_model\"}, {\"input\": [{\"content\": \"Eres un evaluador imparcial. Analiza la respuesta del asistente y asigna una puntuación entre 0 y 1 para el criterio \\\"Precisión en los datos\\\". Confirma que los datos aportados sean correctos y estén bien fundamentados.\", \"role\": \"system\", \"type\": \"message\"}, {\"content\": \"Prompt del usuario:\n    {{item.prompt}}·\n    Respuesta del asistente:\n    {{item.completion}}\", \"role\": \"user\", \"type\": \"message\"}], \"model\": \"gpt-4o-mini\", \"name\": \"Precisión en los datos\", \"pass_threshold\": 0.7, \"range\": [0, 1], \"type\": \"score_model\"}]}\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m     \u001b[36mawait\u001b[39m promise\n     \u001b[90m 103 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m     expect(createMock)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m       expect\u001b[33m.\u001b[39mobjectContaining({\n     \u001b[90m 106 |\u001b[39m         evaluation_template_id\u001b[33m:\u001b[39m \u001b[32m'tmpl_123'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 107 |\u001b[39m         inputs\u001b[33m:\u001b[39m [\u001b[0m\n\n      at Object.<anonymous> (test/agent-eval.e2e-spec.ts:104:24)\n\n  ● AgentEvalService › utiliza los resultados del grader cuando la respuesta final llega en el run\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    - Expected\n    + Received\n\n      Object {\n        \"data\": Object {\n    -     \"evaluator\": \"grader\",\n    -     \"feedback\": \"Necesita más detalle\",\n    -     \"grade\": 0.42,\n    +     \"evaluator\": \"auto-eval\",\n    +     \"feedback\": \"Error al ejecutar la evaluación automática: openai.evals.runs.create is not a function\",\n        },\n        \"where\": Object {\n          \"id\": \"trace-2\",\n        },\n      },\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 159 |\u001b[39m\n     \u001b[90m 160 |\u001b[39m     expect(retrieveMock)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 161 |\u001b[39m     expect(prisma\u001b[33m.\u001b[39magentTrace\u001b[33m.\u001b[39mupdate)\u001b[33m.\u001b[39mtoHaveBeenCalledWith({\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 162 |\u001b[39m       where\u001b[33m:\u001b[39m { id\u001b[33m:\u001b[39m \u001b[32m'trace-2'\u001b[39m }\u001b[33m,\u001b[39m\n     \u001b[90m 163 |\u001b[39m       data\u001b[33m:\u001b[39m {\n     \u001b[90m 164 |\u001b[39m         grade\u001b[33m:\u001b[39m \u001b[35m0.42\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/agent-eval.e2e-spec.ts:161:38)\n\nFAIL apps/api/test/dashboard.e2e-spec.ts (10.622 s)\n  ● DashboardController (e2e) › /dashboard/areas (GET) should return grouped metrics with averages\n\n    Nest can't resolve dependencies of the AgentRunController (AgentRunnerService, ?, AgentTraceService, AgentEvalService). Please make sure that the argument AgentUploadService at index [1] is available in the AgentsModule context.\n\n    Potential solutions:\n    - Is AgentsModule a valid NestJS module?\n    - If AgentUploadService is a provider, is it part of the current AgentsModule?\n    - If AgentUploadService is exported from a separate @Module, is that module imported within AgentsModule?\n      @Module({\n        imports: [ /* the Module containing AgentUploadService */ ]\n      })\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m\n     \u001b[90m 52 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mconst\u001b[39m moduleFixture\u001b[33m:\u001b[39m \u001b[33mTestingModule\u001b[39m \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mTest\u001b[39m\u001b[33m.\u001b[39mcreateTestingModule({\n     \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       imports\u001b[33m:\u001b[39m [\u001b[33mAppModule\u001b[39m]\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     })\n     \u001b[90m 56 |\u001b[39m       \u001b[33m.\u001b[39moverrideProvider(\u001b[33mPrismaService\u001b[39m)\u001b[0m\n\n      at TestingInjector.lookupComponentInParentModules (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:262:19)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:215:33)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:129:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:144:27)\n      at TestingInjector.loadInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:89:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 1)\n      at TestingInstanceLoader.createInstancesOfControllers (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 3)\n      at TestingInstanceLoader.createInstances (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (test/dashboard.e2e-spec.ts:53:42)\n\n  ● DashboardController (e2e) › /dashboard/leaderboard (GET) should include leaderboard and area summaries\n\n    Nest can't resolve dependencies of the AgentRunController (AgentRunnerService, ?, AgentTraceService, AgentEvalService). Please make sure that the argument AgentUploadService at index [1] is available in the AgentsModule context.\n\n    Potential solutions:\n    - Is AgentsModule a valid NestJS module?\n    - If AgentUploadService is a provider, is it part of the current AgentsModule?\n    - If AgentUploadService is exported from a separate @Module, is that module imported within AgentsModule?\n      @Module({\n        imports: [ /* the Module containing AgentUploadService */ ]\n      })\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m\n     \u001b[90m 52 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mconst\u001b[39m moduleFixture\u001b[33m:\u001b[39m \u001b[33mTestingModule\u001b[39m \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mTest\u001b[39m\u001b[33m.\u001b[39mcreateTestingModule({\n     \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       imports\u001b[33m:\u001b[39m [\u001b[33mAppModule\u001b[39m]\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     })\n     \u001b[90m 56 |\u001b[39m       \u001b[33m.\u001b[39moverrideProvider(\u001b[33mPrismaService\u001b[39m)\u001b[0m\n\n      at TestingInjector.lookupComponentInParentModules (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:262:19)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:215:33)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:129:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:144:27)\n      at TestingInjector.loadInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:89:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 1)\n      at TestingInstanceLoader.createInstancesOfControllers (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 3)\n      at TestingInstanceLoader.createInstances (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (test/dashboard.e2e-spec.ts:53:42)\n\n\n  ● Test suite failed to run\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 150 |\u001b[39m\n     \u001b[90m 151 |\u001b[39m   afterAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 152 |\u001b[39m     \u001b[36mawait\u001b[39m app\u001b[33m.\u001b[39mclose()\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 153 |\u001b[39m   })\n     \u001b[90m 154 |\u001b[39m })\n     \u001b[90m 155 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/dashboard.e2e-spec.ts:152:15)\n\nFAIL apps/api/test/agents.e2e-spec.ts (10.657 s)\n  ● AgentRunController (e2e) › POST /agents/:id/run should delegate to AgentRunnerService\n\n    Nest can't resolve dependencies of the AgentRunController (AgentRunnerService, ?, AgentTraceService, AgentEvalService). Please make sure that the argument AgentUploadService at index [1] is available in the AgentsModule context.\n\n    Potential solutions:\n    - Is AgentsModule a valid NestJS module?\n    - If AgentUploadService is a provider, is it part of the current AgentsModule?\n    - If AgentUploadService is exported from a separate @Module, is that module imported within AgentsModule?\n      @Module({\n        imports: [ /* the Module containing AgentUploadService */ ]\n      })\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m     \u001b[36mconst\u001b[39m moduleFixture\u001b[33m:\u001b[39m \u001b[33mTestingModule\u001b[39m \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mTest\u001b[39m\u001b[33m.\u001b[39mcreateTestingModule({\n     \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m       imports\u001b[33m:\u001b[39m [\u001b[33mAppModule\u001b[39m]\n     \u001b[90m 33 |\u001b[39m     })\n     \u001b[90m 34 |\u001b[39m       \u001b[33m.\u001b[39moverrideProvider(\u001b[33mAgentRunnerService\u001b[39m)\u001b[0m\n\n      at TestingInjector.lookupComponentInParentModules (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:262:19)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:215:33)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:129:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:144:27)\n      at TestingInjector.loadInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:89:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 1)\n      at TestingInstanceLoader.createInstancesOfControllers (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 3)\n      at TestingInstanceLoader.createInstances (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (test/agents.e2e-spec.ts:31:42)\n\n  ● AgentRunController (e2e) › GET /agents/:id/traces should return trace summaries from AgentRunnerService\n\n    Nest can't resolve dependencies of the AgentRunController (AgentRunnerService, ?, AgentTraceService, AgentEvalService). Please make sure that the argument AgentUploadService at index [1] is available in the AgentsModule context.\n\n    Potential solutions:\n    - Is AgentsModule a valid NestJS module?\n    - If AgentUploadService is a provider, is it part of the current AgentsModule?\n    - If AgentUploadService is exported from a separate @Module, is that module imported within AgentsModule?\n      @Module({\n        imports: [ /* the Module containing AgentUploadService */ ]\n      })\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m     \u001b[36mconst\u001b[39m moduleFixture\u001b[33m:\u001b[39m \u001b[33mTestingModule\u001b[39m \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mTest\u001b[39m\u001b[33m.\u001b[39mcreateTestingModule({\n     \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m       imports\u001b[33m:\u001b[39m [\u001b[33mAppModule\u001b[39m]\n     \u001b[90m 33 |\u001b[39m     })\n     \u001b[90m 34 |\u001b[39m       \u001b[33m.\u001b[39moverrideProvider(\u001b[33mAgentRunnerService\u001b[39m)\u001b[0m\n\n      at TestingInjector.lookupComponentInParentModules (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:262:19)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:215:33)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:129:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:144:27)\n      at TestingInjector.loadInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:89:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 1)\n      at TestingInstanceLoader.createInstancesOfControllers (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 3)\n      at TestingInstanceLoader.createInstances (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (test/agents.e2e-spec.ts:31:42)\n\n\n  ● Test suite failed to run\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 47 |\u001b[39m\n     \u001b[90m 48 |\u001b[39m   afterAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 49 |\u001b[39m     \u001b[36mawait\u001b[39m app\u001b[33m.\u001b[39mclose()\n     \u001b[90m    |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 50 |\u001b[39m   })\n     \u001b[90m 51 |\u001b[39m\n     \u001b[90m 52 |\u001b[39m   it(\u001b[32m'POST /agents/:id/run should delegate to AgentRunnerService'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (test/agents.e2e-spec.ts:49:15)\n\nFAIL apps/api/test/day1-agents.e2e-spec.ts (12.884 s)\n  ● Agents API Day 1 flows (e2e) › GET /agents returns the seeded catalog\n\n    Nest can't resolve dependencies of the AgentRunController (AgentRunnerService, ?, AgentTraceService, AgentEvalService). Please make sure that the argument AgentUploadService at index [1] is available in the AgentsModule context.\n\n    Potential solutions:\n    - Is AgentsModule a valid NestJS module?\n    - If AgentUploadService is a provider, is it part of the current AgentsModule?\n    - If AgentUploadService is exported from a separate @Module, is that module imported within AgentsModule?\n      @Module({\n        imports: [ /* the Module containing AgentUploadService */ ]\n      })\n\n    \u001b[0m \u001b[90m 112 |\u001b[39m     }\n     \u001b[90m 113 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 114 |\u001b[39m     \u001b[36mconst\u001b[39m moduleFixture\u001b[33m:\u001b[39m \u001b[33mTestingModule\u001b[39m \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mTest\u001b[39m\u001b[33m.\u001b[39mcreateTestingModule({\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 115 |\u001b[39m       imports\u001b[33m:\u001b[39m [\u001b[33mAppModule\u001b[39m]\n     \u001b[90m 116 |\u001b[39m     })\n     \u001b[90m 117 |\u001b[39m       \u001b[33m.\u001b[39moverrideProvider(\u001b[33mAgentRunnerService\u001b[39m)\u001b[0m\n\n      at TestingInjector.lookupComponentInParentModules (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:262:19)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:215:33)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:129:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:144:27)\n      at TestingInjector.loadInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:89:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 1)\n      at TestingInstanceLoader.createInstancesOfControllers (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 3)\n      at TestingInstanceLoader.createInstances (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (test/day1-agents.e2e-spec.ts:114:42)\n\n  ● Agents API Day 1 flows (e2e) › POST /agents/:id/run creates a trace and GET /agents/:id/traces returns it\n\n    Nest can't resolve dependencies of the AgentRunController (AgentRunnerService, ?, AgentTraceService, AgentEvalService). Please make sure that the argument AgentUploadService at index [1] is available in the AgentsModule context.\n\n    Potential solutions:\n    - Is AgentsModule a valid NestJS module?\n    - If AgentUploadService is a provider, is it part of the current AgentsModule?\n    - If AgentUploadService is exported from a separate @Module, is that module imported within AgentsModule?\n      @Module({\n        imports: [ /* the Module containing AgentUploadService */ ]\n      })\n\n    \u001b[0m \u001b[90m 112 |\u001b[39m     }\n     \u001b[90m 113 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 114 |\u001b[39m     \u001b[36mconst\u001b[39m moduleFixture\u001b[33m:\u001b[39m \u001b[33mTestingModule\u001b[39m \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mTest\u001b[39m\u001b[33m.\u001b[39mcreateTestingModule({\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 115 |\u001b[39m       imports\u001b[33m:\u001b[39m [\u001b[33mAppModule\u001b[39m]\n     \u001b[90m 116 |\u001b[39m     })\n     \u001b[90m 117 |\u001b[39m       \u001b[33m.\u001b[39moverrideProvider(\u001b[33mAgentRunnerService\u001b[39m)\u001b[0m\n\n      at TestingInjector.lookupComponentInParentModules (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:262:19)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:215:33)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:129:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:144:27)\n      at TestingInjector.loadInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:89:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 1)\n      at TestingInstanceLoader.createInstancesOfControllers (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 3)\n      at TestingInstanceLoader.createInstances (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (test/day1-agents.e2e-spec.ts:114:42)\n\nTest Suites: 4 failed, 4 total\nTests:       8 failed, 8 total\nSnapshots:   0 total\nTime:        13.938 s, estimated 17 s\nRan all test suites.\n",
      "error": "Command failed: pnpm exec jest --config apps/api/jest.config.ts\n\u001b[31m[Nest] 10036  - \u001b[39m14/11/2023, 7:13:20 p.m. \u001b[31m  ERROR\u001b[39m \u001b[38;5;3m[AgentEvalService] \u001b[39m\u001b[31m❌ Error evaluando traza trace-1: openai.evals.runs.create is not a function\u001b[39m\n\u001b[31m[Nest] 10036  - \u001b[39m14/11/2023, 7:13:20 p.m. \u001b[31m  ERROR\u001b[39m \u001b[38;5;3m[AgentEvalService] \u001b[39m\u001b[31m❌ Error evaluando traza trace-2: openai.evals.runs.create is not a function\u001b[39m\nFAIL apps/api/test/agent-eval.e2e-spec.ts (9.122 s)\n  ● AgentEvalService › crea la evaluación y persiste grade/feedback/evaluator\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: ObjectContaining {\"evaluation_template_id\": \"tmpl_123\", \"inputs\": [ObjectContaining {\"input\": \"Pregunta original\", \"output\": \"Respuesta final\"}]}\n    Received: {\"data_source_config\": {\"include_sample_schema\": true, \"item_schema\": {\"properties\": {\"agent_name\": {\"type\": \"string\"}, \"completion\": {\"type\": \"string\"}, \"prompt\": {\"type\": \"string\"}, \"trace_id\": {\"type\": \"string\"}}, \"required\": [\"prompt\", \"completion\"], \"type\": \"object\"}, \"type\": \"custom\"}, \"name\": \"trace-trace-1-1700000000000\", \"testing_criteria\": [{\"input\": [{\"content\": \"Eres un evaluador imparcial. Analiza la respuesta del asistente y asigna una puntuación entre 0 y 1 para el criterio \\\"Claridad técnica\\\". Evalúa si la respuesta explica conceptos técnicos de forma clara y correcta.\", \"role\": \"system\", \"type\": \"message\"}, {\"content\": \"Prompt del usuario:\n    {{item.prompt}}·\n    Respuesta del asistente:\n    {{item.completion}}\", \"role\": \"user\", \"type\": \"message\"}], \"model\": \"gpt-4o-mini\", \"name\": \"Claridad técnica\", \"pass_threshold\": 0.7, \"range\": [0, 1], \"type\": \"score_model\"}, {\"input\": [{\"content\": \"Eres un evaluador imparcial. Analiza la respuesta del asistente y asigna una puntuación entre 0 y 1 para el criterio \\\"Coherencia institucional\\\". Verifica que el mensaje respete el tono y lineamientos institucionales del ENACOM.\", \"role\": \"system\", \"type\": \"message\"}, {\"content\": \"Prompt del usuario:\n    {{item.prompt}}·\n    Respuesta del asistente:\n    {{item.completion}}\", \"role\": \"user\", \"type\": \"message\"}], \"model\": \"gpt-4o-mini\", \"name\": \"Coherencia institucional\", \"pass_threshold\": 0.7, \"range\": [0, 1], \"type\": \"score_model\"}, {\"input\": [{\"content\": \"Eres un evaluador imparcial. Analiza la respuesta del asistente y asigna una puntuación entre 0 y 1 para el criterio \\\"Nivel de detalle\\\". Analiza si la respuesta ofrece el nivel de profundidad adecuado para el pedido.\", \"role\": \"system\", \"type\": \"message\"}, {\"content\": \"Prompt del usuario:\n    {{item.prompt}}·\n    Respuesta del asistente:\n    {{item.completion}}\", \"role\": \"user\", \"type\": \"message\"}], \"model\": \"gpt-4o-mini\", \"name\": \"Nivel de detalle\", \"pass_threshold\": 0.7, \"range\": [0, 1], \"type\": \"score_model\"}, {\"input\": [{\"content\": \"Eres un evaluador imparcial. Analiza la respuesta del asistente y asigna una puntuación entre 0 y 1 para el criterio \\\"Precisión en los datos\\\". Confirma que los datos aportados sean correctos y estén bien fundamentados.\", \"role\": \"system\", \"type\": \"message\"}, {\"content\": \"Prompt del usuario:\n    {{item.prompt}}·\n    Respuesta del asistente:\n    {{item.completion}}\", \"role\": \"user\", \"type\": \"message\"}], \"model\": \"gpt-4o-mini\", \"name\": \"Precisión en los datos\", \"pass_threshold\": 0.7, \"range\": [0, 1], \"type\": \"score_model\"}]}\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 102 |\u001b[39m     \u001b[36mawait\u001b[39m promise\n     \u001b[90m 103 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 104 |\u001b[39m     expect(createMock)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\n     \u001b[90m     |\u001b[39m                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 105 |\u001b[39m       expect\u001b[33m.\u001b[39mobjectContaining({\n     \u001b[90m 106 |\u001b[39m         evaluation_template_id\u001b[33m:\u001b[39m \u001b[32m'tmpl_123'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 107 |\u001b[39m         inputs\u001b[33m:\u001b[39m [\u001b[0m\n\n      at Object.<anonymous> (test/agent-eval.e2e-spec.ts:104:24)\n\n  ● AgentEvalService › utiliza los resultados del grader cuando la respuesta final llega en el run\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    - Expected\n    + Received\n\n      Object {\n        \"data\": Object {\n    -     \"evaluator\": \"grader\",\n    -     \"feedback\": \"Necesita más detalle\",\n    -     \"grade\": 0.42,\n    +     \"evaluator\": \"auto-eval\",\n    +     \"feedback\": \"Error al ejecutar la evaluación automática: openai.evals.runs.create is not a function\",\n        },\n        \"where\": Object {\n          \"id\": \"trace-2\",\n        },\n      },\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 159 |\u001b[39m\n     \u001b[90m 160 |\u001b[39m     expect(retrieveMock)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 161 |\u001b[39m     expect(prisma\u001b[33m.\u001b[39magentTrace\u001b[33m.\u001b[39mupdate)\u001b[33m.\u001b[39mtoHaveBeenCalledWith({\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 162 |\u001b[39m       where\u001b[33m:\u001b[39m { id\u001b[33m:\u001b[39m \u001b[32m'trace-2'\u001b[39m }\u001b[33m,\u001b[39m\n     \u001b[90m 163 |\u001b[39m       data\u001b[33m:\u001b[39m {\n     \u001b[90m 164 |\u001b[39m         grade\u001b[33m:\u001b[39m \u001b[35m0.42\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/agent-eval.e2e-spec.ts:161:38)\n\nFAIL apps/api/test/dashboard.e2e-spec.ts (10.622 s)\n  ● DashboardController (e2e) › /dashboard/areas (GET) should return grouped metrics with averages\n\n    Nest can't resolve dependencies of the AgentRunController (AgentRunnerService, ?, AgentTraceService, AgentEvalService). Please make sure that the argument AgentUploadService at index [1] is available in the AgentsModule context.\n\n    Potential solutions:\n    - Is AgentsModule a valid NestJS module?\n    - If AgentUploadService is a provider, is it part of the current AgentsModule?\n    - If AgentUploadService is exported from a separate @Module, is that module imported within AgentsModule?\n      @Module({\n        imports: [ /* the Module containing AgentUploadService */ ]\n      })\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m\n     \u001b[90m 52 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mconst\u001b[39m moduleFixture\u001b[33m:\u001b[39m \u001b[33mTestingModule\u001b[39m \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mTest\u001b[39m\u001b[33m.\u001b[39mcreateTestingModule({\n     \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       imports\u001b[33m:\u001b[39m [\u001b[33mAppModule\u001b[39m]\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     })\n     \u001b[90m 56 |\u001b[39m       \u001b[33m.\u001b[39moverrideProvider(\u001b[33mPrismaService\u001b[39m)\u001b[0m\n\n      at TestingInjector.lookupComponentInParentModules (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:262:19)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:215:33)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:129:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:144:27)\n      at TestingInjector.loadInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:89:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 1)\n      at TestingInstanceLoader.createInstancesOfControllers (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 3)\n      at TestingInstanceLoader.createInstances (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (test/dashboard.e2e-spec.ts:53:42)\n\n  ● DashboardController (e2e) › /dashboard/leaderboard (GET) should include leaderboard and area summaries\n\n    Nest can't resolve dependencies of the AgentRunController (AgentRunnerService, ?, AgentTraceService, AgentEvalService). Please make sure that the argument AgentUploadService at index [1] is available in the AgentsModule context.\n\n    Potential solutions:\n    - Is AgentsModule a valid NestJS module?\n    - If AgentUploadService is a provider, is it part of the current AgentsModule?\n    - If AgentUploadService is exported from a separate @Module, is that module imported within AgentsModule?\n      @Module({\n        imports: [ /* the Module containing AgentUploadService */ ]\n      })\n\n    \u001b[0m \u001b[90m 51 |\u001b[39m\n     \u001b[90m 52 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 53 |\u001b[39m     \u001b[36mconst\u001b[39m moduleFixture\u001b[33m:\u001b[39m \u001b[33mTestingModule\u001b[39m \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mTest\u001b[39m\u001b[33m.\u001b[39mcreateTestingModule({\n     \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 54 |\u001b[39m       imports\u001b[33m:\u001b[39m [\u001b[33mAppModule\u001b[39m]\u001b[33m,\u001b[39m\n     \u001b[90m 55 |\u001b[39m     })\n     \u001b[90m 56 |\u001b[39m       \u001b[33m.\u001b[39moverrideProvider(\u001b[33mPrismaService\u001b[39m)\u001b[0m\n\n      at TestingInjector.lookupComponentInParentModules (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:262:19)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:215:33)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:129:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:144:27)\n      at TestingInjector.loadInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:89:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 1)\n      at TestingInstanceLoader.createInstancesOfControllers (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 3)\n      at TestingInstanceLoader.createInstances (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (test/dashboard.e2e-spec.ts:53:42)\n\n\n  ● Test suite failed to run\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 150 |\u001b[39m\n     \u001b[90m 151 |\u001b[39m   afterAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 152 |\u001b[39m     \u001b[36mawait\u001b[39m app\u001b[33m.\u001b[39mclose()\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 153 |\u001b[39m   })\n     \u001b[90m 154 |\u001b[39m })\n     \u001b[90m 155 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (test/dashboard.e2e-spec.ts:152:15)\n\nFAIL apps/api/test/agents.e2e-spec.ts (10.657 s)\n  ● AgentRunController (e2e) › POST /agents/:id/run should delegate to AgentRunnerService\n\n    Nest can't resolve dependencies of the AgentRunController (AgentRunnerService, ?, AgentTraceService, AgentEvalService). Please make sure that the argument AgentUploadService at index [1] is available in the AgentsModule context.\n\n    Potential solutions:\n    - Is AgentsModule a valid NestJS module?\n    - If AgentUploadService is a provider, is it part of the current AgentsModule?\n    - If AgentUploadService is exported from a separate @Module, is that module imported within AgentsModule?\n      @Module({\n        imports: [ /* the Module containing AgentUploadService */ ]\n      })\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m     \u001b[36mconst\u001b[39m moduleFixture\u001b[33m:\u001b[39m \u001b[33mTestingModule\u001b[39m \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mTest\u001b[39m\u001b[33m.\u001b[39mcreateTestingModule({\n     \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m       imports\u001b[33m:\u001b[39m [\u001b[33mAppModule\u001b[39m]\n     \u001b[90m 33 |\u001b[39m     })\n     \u001b[90m 34 |\u001b[39m       \u001b[33m.\u001b[39moverrideProvider(\u001b[33mAgentRunnerService\u001b[39m)\u001b[0m\n\n      at TestingInjector.lookupComponentInParentModules (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:262:19)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:215:33)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:129:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:144:27)\n      at TestingInjector.loadInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:89:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 1)\n      at TestingInstanceLoader.createInstancesOfControllers (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 3)\n      at TestingInstanceLoader.createInstances (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (test/agents.e2e-spec.ts:31:42)\n\n  ● AgentRunController (e2e) › GET /agents/:id/traces should return trace summaries from AgentRunnerService\n\n    Nest can't resolve dependencies of the AgentRunController (AgentRunnerService, ?, AgentTraceService, AgentEvalService). Please make sure that the argument AgentUploadService at index [1] is available in the AgentsModule context.\n\n    Potential solutions:\n    - Is AgentsModule a valid NestJS module?\n    - If AgentUploadService is a provider, is it part of the current AgentsModule?\n    - If AgentUploadService is exported from a separate @Module, is that module imported within AgentsModule?\n      @Module({\n        imports: [ /* the Module containing AgentUploadService */ ]\n      })\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m     \u001b[36mconst\u001b[39m moduleFixture\u001b[33m:\u001b[39m \u001b[33mTestingModule\u001b[39m \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mTest\u001b[39m\u001b[33m.\u001b[39mcreateTestingModule({\n     \u001b[90m    |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m       imports\u001b[33m:\u001b[39m [\u001b[33mAppModule\u001b[39m]\n     \u001b[90m 33 |\u001b[39m     })\n     \u001b[90m 34 |\u001b[39m       \u001b[33m.\u001b[39moverrideProvider(\u001b[33mAgentRunnerService\u001b[39m)\u001b[0m\n\n      at TestingInjector.lookupComponentInParentModules (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:262:19)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:215:33)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:129:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:144:27)\n      at TestingInjector.loadInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:89:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 1)\n      at TestingInstanceLoader.createInstancesOfControllers (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 3)\n      at TestingInstanceLoader.createInstances (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (test/agents.e2e-spec.ts:31:42)\n\n\n  ● Test suite failed to run\n\n    TypeError: Cannot read properties of undefined (reading 'close')\n\n    \u001b[0m \u001b[90m 47 |\u001b[39m\n     \u001b[90m 48 |\u001b[39m   afterAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 49 |\u001b[39m     \u001b[36mawait\u001b[39m app\u001b[33m.\u001b[39mclose()\n     \u001b[90m    |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 50 |\u001b[39m   })\n     \u001b[90m 51 |\u001b[39m\n     \u001b[90m 52 |\u001b[39m   it(\u001b[32m'POST /agents/:id/run should delegate to AgentRunnerService'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (test/agents.e2e-spec.ts:49:15)\n\nFAIL apps/api/test/day1-agents.e2e-spec.ts (12.884 s)\n  ● Agents API Day 1 flows (e2e) › GET /agents returns the seeded catalog\n\n    Nest can't resolve dependencies of the AgentRunController (AgentRunnerService, ?, AgentTraceService, AgentEvalService). Please make sure that the argument AgentUploadService at index [1] is available in the AgentsModule context.\n\n    Potential solutions:\n    - Is AgentsModule a valid NestJS module?\n    - If AgentUploadService is a provider, is it part of the current AgentsModule?\n    - If AgentUploadService is exported from a separate @Module, is that module imported within AgentsModule?\n      @Module({\n        imports: [ /* the Module containing AgentUploadService */ ]\n      })\n\n    \u001b[0m \u001b[90m 112 |\u001b[39m     }\n     \u001b[90m 113 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 114 |\u001b[39m     \u001b[36mconst\u001b[39m moduleFixture\u001b[33m:\u001b[39m \u001b[33mTestingModule\u001b[39m \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mTest\u001b[39m\u001b[33m.\u001b[39mcreateTestingModule({\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 115 |\u001b[39m       imports\u001b[33m:\u001b[39m [\u001b[33mAppModule\u001b[39m]\n     \u001b[90m 116 |\u001b[39m     })\n     \u001b[90m 117 |\u001b[39m       \u001b[33m.\u001b[39moverrideProvider(\u001b[33mAgentRunnerService\u001b[39m)\u001b[0m\n\n      at TestingInjector.lookupComponentInParentModules (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:262:19)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:215:33)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:129:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:144:27)\n      at TestingInjector.loadInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:89:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 1)\n      at TestingInstanceLoader.createInstancesOfControllers (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 3)\n      at TestingInstanceLoader.createInstances (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (test/day1-agents.e2e-spec.ts:114:42)\n\n  ● Agents API Day 1 flows (e2e) › POST /agents/:id/run creates a trace and GET /agents/:id/traces returns it\n\n    Nest can't resolve dependencies of the AgentRunController (AgentRunnerService, ?, AgentTraceService, AgentEvalService). Please make sure that the argument AgentUploadService at index [1] is available in the AgentsModule context.\n\n    Potential solutions:\n    - Is AgentsModule a valid NestJS module?\n    - If AgentUploadService is a provider, is it part of the current AgentsModule?\n    - If AgentUploadService is exported from a separate @Module, is that module imported within AgentsModule?\n      @Module({\n        imports: [ /* the Module containing AgentUploadService */ ]\n      })\n\n    \u001b[0m \u001b[90m 112 |\u001b[39m     }\n     \u001b[90m 113 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 114 |\u001b[39m     \u001b[36mconst\u001b[39m moduleFixture\u001b[33m:\u001b[39m \u001b[33mTestingModule\u001b[39m \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mTest\u001b[39m\u001b[33m.\u001b[39mcreateTestingModule({\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 115 |\u001b[39m       imports\u001b[33m:\u001b[39m [\u001b[33mAppModule\u001b[39m]\n     \u001b[90m 116 |\u001b[39m     })\n     \u001b[90m 117 |\u001b[39m       \u001b[33m.\u001b[39moverrideProvider(\u001b[33mAgentRunnerService\u001b[39m)\u001b[0m\n\n      at TestingInjector.lookupComponentInParentModules (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:262:19)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:215:33)\n      at TestingInjector.resolveComponentInstance (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:129:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:144:27)\n      at TestingInjector.loadInstance (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/injector.js:89:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 1)\n      at TestingInstanceLoader.createInstancesOfControllers (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 3)\n      at TestingInstanceLoader.createInstances (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+core@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+platfo_ug43xkxzpru5sofuywkvnd3edy/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../node_modules/.pnpm/@nestjs+testing@10.4.20_@nestjs+common@10.4.20_reflect-metadata@0.2.2_rxjs@7.8.2__@nestjs+cor_q2l2dqhjudmmdjwfrxx4tbtwgy/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (test/day1-agents.e2e-spec.ts:114:42)\n\nTest Suites: 4 failed, 4 total\nTests:       8 failed, 8 total\nSnapshots:   0 total\nTime:        13.938 s, estimated 17 s\nRan all test suites.\n"
    },
    "web": {
      "status": "failed",
      "command": "pnpm exec jest --config apps/web/jest.config.ts",
      "exitCode": 1,
      "stdout": "",
      "stderr": "FAIL apps/web/src/app/dashboard/areas/page.test.tsx\n  AreasDashboardPage\n    × renders table headers and data (42 ms)\n\n  ● AreasDashboardPage › renders table headers and data\n\n    A React Element from an older version of React was rendered. This is not supported. It can happen if:\n    - Multiple copies of the \"react\" package is used.\n    - A library pre-bundled an old copy of \"react\" or \"react/jsx-runtime\".\n    - A compiler tries to \"inline\" JSX instead of using the runtime.\n\n    \u001b[0m \u001b[90m 13 |\u001b[39m describe(\u001b[32m'AreasDashboardPage'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 14 |\u001b[39m   it(\u001b[32m'renders table headers and data'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 15 |\u001b[39m     render(\u001b[33m<\u001b[39m\u001b[33mAreasDashboardPage\u001b[39m \u001b[33m/\u001b[39m\u001b[33m>\u001b[39m)\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 16 |\u001b[39m\n     \u001b[90m 17 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m screen\u001b[33m.\u001b[39mgetByText(\u001b[35m/Desempeño por Área/i\u001b[39m))\n     \u001b[90m 18 |\u001b[39m\u001b[0m\n\n      at throwOnInvalidObjectTypeImpl (../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:6095:15)\n      at throwOnInvalidObjectType (../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:6113:11)\n      at reconcileChildFibersImpl (../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:7058:11)\n      at ../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:7098:33\n      at reconcileChildren (../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:9702:13)\n      at beginWork (../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:11899:15)\n      at runWithFiberInDEV (../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)\n      at performUnitOfWork (../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)\n      at workLoopSync (../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)\n      at renderRootSync (../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)\n      at performWorkOnRoot (../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)\n      at performWorkOnRootViaSchedulerTask (../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)\n      at flushActQueue (../../node_modules/.pnpm/react@19.2.0/node_modules/react/cjs/react.development.js:590:34)\n      at process.env.NODE_ENV.exports.act (../../node_modules/.pnpm/react@19.2.0/node_modules/react/cjs/react.development.js:884:10)\n      at ../../node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.1_@types+react-dom@19.2.1_@types+reac_zdhx6kik3ixr64quvwasyknzz4/node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../../node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.1_@types+react-dom@19.2.1_@types+reac_zdhx6kik3ixr64quvwasyknzz4/node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../../node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.1_@types+react-dom@19.2.1_@types+reac_zdhx6kik3ixr64quvwasyknzz4/node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/app/dashboard/areas/page.test.tsx:15:11)\n\nTest Suites: 1 failed, 1 total\nTests:       1 failed, 1 total\nSnapshots:   0 total\nTime:        5.654 s\nRan all test suites.\n",
      "error": "Command failed: pnpm exec jest --config apps/web/jest.config.ts\nFAIL apps/web/src/app/dashboard/areas/page.test.tsx\n  AreasDashboardPage\n    × renders table headers and data (42 ms)\n\n  ● AreasDashboardPage › renders table headers and data\n\n    A React Element from an older version of React was rendered. This is not supported. It can happen if:\n    - Multiple copies of the \"react\" package is used.\n    - A library pre-bundled an old copy of \"react\" or \"react/jsx-runtime\".\n    - A compiler tries to \"inline\" JSX instead of using the runtime.\n\n    \u001b[0m \u001b[90m 13 |\u001b[39m describe(\u001b[32m'AreasDashboardPage'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 14 |\u001b[39m   it(\u001b[32m'renders table headers and data'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 15 |\u001b[39m     render(\u001b[33m<\u001b[39m\u001b[33mAreasDashboardPage\u001b[39m \u001b[33m/\u001b[39m\u001b[33m>\u001b[39m)\n     \u001b[90m    |\u001b[39m           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 16 |\u001b[39m\n     \u001b[90m 17 |\u001b[39m     \u001b[36mawait\u001b[39m waitFor(() \u001b[33m=>\u001b[39m screen\u001b[33m.\u001b[39mgetByText(\u001b[35m/Desempeño por Área/i\u001b[39m))\n     \u001b[90m 18 |\u001b[39m\u001b[0m\n\n      at throwOnInvalidObjectTypeImpl (../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:6095:15)\n      at throwOnInvalidObjectType (../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:6113:11)\n      at reconcileChildFibersImpl (../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:7058:11)\n      at ../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:7098:33\n      at reconcileChildren (../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:9702:13)\n      at beginWork (../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:11899:15)\n      at runWithFiberInDEV (../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:874:13)\n      at performUnitOfWork (../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)\n      at workLoopSync (../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)\n      at renderRootSync (../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)\n      at performWorkOnRoot (../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)\n      at performWorkOnRootViaSchedulerTask (../../node_modules/.pnpm/react-dom@19.2.0_react@19.2.0/node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)\n      at flushActQueue (../../node_modules/.pnpm/react@19.2.0/node_modules/react/cjs/react.development.js:590:34)\n      at process.env.NODE_ENV.exports.act (../../node_modules/.pnpm/react@19.2.0/node_modules/react/cjs/react.development.js:884:10)\n      at ../../node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.1_@types+react-dom@19.2.1_@types+reac_zdhx6kik3ixr64quvwasyknzz4/node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../../node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.1_@types+react-dom@19.2.1_@types+reac_zdhx6kik3ixr64quvwasyknzz4/node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../../node_modules/.pnpm/@testing-library+react@16.3.0_@testing-library+dom@10.4.1_@types+react-dom@19.2.1_@types+reac_zdhx6kik3ixr64quvwasyknzz4/node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/app/dashboard/areas/page.test.tsx:15:11)\n\nTest Suites: 1 failed, 1 total\nTests:       1 failed, 1 total\nSnapshots:   0 total\nTime:        5.654 s\nRan all test suites.\n"
    }
  }
}
One or more diagnostics checks did not pass.
⚠️ Error ejecutando diagnóstico
---
